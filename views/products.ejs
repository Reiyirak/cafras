<!DOCTYPE HTML>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache" />
  <meta http-equiv="cache-control" content="max-age=604800" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Carfras - Productos</title>

  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">

  <!-- jQuery -->
  <script src="js/jquery-2.0.0.min.js" type="text/javascript"></script>

  <!-- Bootstrap4 files-->
  <script src="js/bootstrap.bundle.min.js" type="text/javascript"></script>
  <link href="css/bootstrap.css" rel="stylesheet" type="text/css" />

  <!-- Font awesome 5 -->
  <link href="fonts/fontawesome/css/all.min.css" type="text/css" rel="stylesheet">

  <!-- plugin: fancybox  -->
  <script src="plugins/fancybox/fancybox.min.js" type="text/javascript"></script>
  <link href="plugins/fancybox/fancybox.min.css" type="text/css" rel="stylesheet">

  <!-- custom style -->
  <link href="css/ui.css" rel="stylesheet" type="text/css" />
  <link href="css/responsive.css" rel="stylesheet" media="only screen and (max-width: 1200px)" />

  <!-- custom javascript -->
  <script src="js/script.js" type="text/javascript"></script>

  <script type="text/javascript">
    /// some script

    // jquery ready start
    $(document).ready(function () {
      // jQuery code

    });
// jquery end
  </script>

</head>

<body>

  <header class="section-header">

    <section class="header-main border-bottom">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-2 col-4">
            <a href="/" class="brand-wrap">
              <img class="logo" src="images/logo.png">
            </a> <!-- brand-wrap.// -->
          </div>
          <div class="col-lg-6 col-sm-12">
            <form action="#" class="search">
              <div class="input-group w-100">
                <input type="text" class="form-control" placeholder="Search">
                <div class="input-group-append">
                  <button class="btn btn-primary" type="submit">
                    <i class="fa fa-search"></i> Search
                  </button>
                </div>
              </div>
            </form> <!-- search-wrap .end// -->
          </div> <!-- col.// -->
          <div class="col-lg-4 col-sm-6 col-12">
            <div class="widgets-wrap float-md-right">
              <div class="widget-header  mr-3">
                <a href="/cart" class="icon icon-sm rounded-circle border"><i class="fa fa-shopping-cart"></i></a>
              </div>
              <div class="widget-header icontext">
                <% if (userLoggedIn) { %>
                  <a href="/profile" class="icon icon-sm rounded-circle border"><i class="fa fa-user"></i></a>
                  <% } else { %>
                    <a href="/login" class="icon icon-sm rounded-circle border"><i class="fa fa-user"></i></a>
                    <% } %>
                <div class="text">
                  <% if (userLoggedIn) { %>
                    <span class="text-muted">Bienvenido!</span>
                    <div>
                      <button href="/logout" class="btn logout-btn">Logout</button> |
                    </div>
                    <% } else { %>
                      <span class="text-muted">Bien venidos!</span>
                      <div>
                        <a href="/login">Iniciar Sesion</a> |
                        <a href="/register">Registrarse</a>
                      </div>
                      <% } %>
                </div>
              </div>

            </div> <!-- widgets-wrap.// -->
          </div> <!-- col.// -->
        </div> <!-- row.// -->
      </div> <!-- container.// -->
    </section> <!-- header-main .// -->
  </header> <!-- section-header.// -->

  <nav class="navbar navbar-main navbar-expand-lg navbar-light">
    <div class="container">

      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_nav"
        aria-controls="main_nav" aria-expanded="false" aria-label="toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="main_nav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="/products">Todos los Productos</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/cart">Carrito</a>
          </li>
        </ul>
      </div> <!-- collapse .// -->
    </div> <!-- container .// -->
  </nav>

  <!-- ========================= SECTION PAGETOP ========================= -->
  <section class="section-pagetop bg">
    <div class="container">
      <h2 class="title-page">Todos los productos</h2>
      <nav>
        <ol class="breadcrumb text-white">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item"><a href="/products">Productos</a></li>
        </ol>
      </nav>
    </div> <!-- container //  -->
  </section>
  <!-- ========================= SECTION INTRO END// ========================= -->

  <!-- ========================= SECTION CONTENT ========================= -->
  <section class="section-content padding-y">
    <div class="container">

      <div class="row">
        <aside class="col-md-3">

          <div class="card">
            <article class="filter-group">
              <header class="card-header">
                <a href="#" data-toggle="collapse" data-target="#collapse_1" aria-expanded="true" class="">
                  <i class="icon-control fa fa-chevron-down"></i>
                  <h6 class="title">Buscar producto</h6>
                </a>
              </header>
              <div class="filter-content collapse show" id="collapse_1" style="">
                <div class="card-body">
                  <form class="pb-3">
                    <div class="input-group">
                      <input type="text" id="searchBar" class="form-control" placeholder="Buscar">
                    </div>
                  </form>
                </div> <!-- card-body.// -->
              </div>
            </article> <!-- filter-group  .// -->
            <article class="filter-group">
              <header class="card-header">
                <a href="#" data-toggle="collapse" data-target="#collapse_2" aria-expanded="true" class="">
                  <i class="icon-control fa fa-chevron-down"></i>
                  <h6 class="title">Marcas </h6>
                </a>
              </header>
              <div class="filter-content collapse show" id="collapse_2" style="">
                <div class="card-body">
                  <form action="/products" method="POST">
                    <label class="custom-control custom-checkbox">
                      <input type="checkbox" name="categories" value="Lirol" class="custom-control-input">
                      <div class="custom-control-label">Lirol</div>
                    </label>
                    <label class="custom-control custom-checkbox">
                      <input type="checkbox" name="categories" value="Alvababy" class="custom-control-input">
                      <div class="custom-control-label">Alvababy</div>
                    </label>
                    <label class="custom-control custom-checkbox">
                      <input type="checkbox" name="categories" value="Mama Koala" class="custom-control-input">
                      <div class="custom-control-label">Mama Koala</div>
                    </label>
                    <label class="custom-control custom-checkbox">
                      <input type="checkbox" name="categories" value="Otros" class="custom-control-input">
                      <div class="custom-control-label">Otros</div>
                    </label>
                  </form>
                </div> <!-- card-body.// -->
              </div>
            </article> <!-- filter-group .// -->
          </div> <!-- card.// -->

        </aside> <!-- col.// -->
        <main class="col-md-9">

          <div class="row" id="productList">
            <% products.forEach(product=> { %>
              <div class="col-md-4 productsArr" data-category="<%= product.category %>">
                <figure class="card card-product-grid">
                  <div class="img-wrap">
                    <img src="<%= product.image %>">
                    <a class="btn-overlay" href="/details/<%= product.id %>">
                      <i class="fa fa-search-plus"></i> Ver producto
                    </a>
                  </div> <!-- img-wrap.// -->
                  <figcaption class="info-wrap">
                    <div class="fix-height">
                      <a href="/details/<%= product.id %>" class="title">
                        <%= product.name %>
                      </a>
                      <span class="price">$<%= product.price %></span>
                    </div>
                    <a href="#" class="btn btn-block btn-primary" onclick="addToCart('<%= product.id %>',
                      '<%= product.name %>','<%= product.price %>','<%= product.image %>', 1)">Add to cart </a>
                  </figcaption>
                </figure>
              </div> <!-- col.// -->
              <% }) %>
          </div> <!-- row end.// -->


          <nav class="mt-4" aria-label="Page navigation sample">
            <ul class="pagination">

              <% if (currentPage > 1) { %>
                <li class="page-item">
                  <a class="page-link" href="/products?page=<%= currentPage - 1 %>">Previous</a>
                </li>
              <% } %>

              <% pages.forEach(page => { %>
                <li class="page-item">
                  <a class="page-link" href="/products?page=<%= page %>"><%= page %></a>
                </li>
              <% }) %>

              <% if (currentPage < totalPages) { %>
                <li class="page-item">
                  <a class="page-link" href="/products?page=<%= currentPage + 1 %>">Next</a>
                </li>
              <% } %>
            </ul>
          </nav>

        </main> <!-- col.// -->

      </div>

    </div> <!-- container .//  -->
  </section>
  <!-- ========================= SECTION CONTENT END// ========================= -->

  <!-- ========================= FOOTER ========================= -->
  <footer class="section-footer border-top padding-y">
    <div class="container">
      <p class="float-md-right">
        &copy Carfras 2023 Todos los derechos reservados
      </p>
    </div><!-- //container -->
  </footer>
  <!-- ========================= FOOTER END // ========================= -->

  <script src="js/categories.js"></script>
  <script src="js/cart.js"></script>
  <script src="/js/logOut.js"></script>
</body>

</html>
